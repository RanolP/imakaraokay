<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Autocomplete API Proxy Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }

        .section h2 {
            margin-top: 0;
            color: #555;
        }

        .test-url {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            word-break: break-all;
            margin: 10px 0;
        }

        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .test-button:hover {
            background: #0056b3;
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .youtube-comparison {
            background: #e8f4fd;
            border-left: 4px solid #1976d2;
        }

        .proxy-api {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }

        .input-group {
            margin: 15px 0;
        }

        input[type="text"] {
            width: 300px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
        }

        .success {
            color: #4caf50;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>📺 YouTube Autocomplete API Proxy Test</h1>

        <div class="section youtube-comparison">
            <h2>📺 Original YouTube Autocomplete API</h2>
            <p>The original YouTube autocomplete URL you provided:</p>
            <div class="test-url">
                http://suggestqueries.google.com/complete/search?client=firefox&ds=yt&q=그것이 당신의
            </div>
            <p><strong>Parameters:</strong></p>
            <ul>
                <li><code>client=firefox</code> - Client identifier</li>
                <li><code>ds=yt</code> - Domain-specific (YouTube)</li>
                <li><code>q=그것이 당신의</code> - Query string</li>
            </ul>
        </div>

        <div class="section proxy-api">
            <h2>🔄 YouTube API Proxy</h2>
            <p class="success">✅ Now using the REAL YouTube autocomplete API through our proxy!</p>
            <p>Our proxy forwards requests to Google's YouTube autocomplete service:</p>

            <div class="input-group">
                <input type="text" id="queryInput" placeholder="Enter search query..." value="그것이 당신의">
                <button class="test-button" onclick="testAutocomplete()">Test Autocomplete</button>
            </div>

            <h3>Predefined Test Queries:</h3>
            <button class="test-button" onclick="testQuery('그것이 당신의')">그것이 당신의 (Your Example)</button>
            <button class="test-button" onclick="testQuery('BTS')">BTS</button>
            <button class="test-button" onclick="testQuery('Катюша')">Катюша (Katyusha)</button>
            <button class="test-button" onclick="testQuery('아이유')">아이유 (IU)</button>
            <button class="test-button" onclick="testQuery('YOASOBI')">YOASOBI</button>
            <button class="test-button" onclick="testQuery('blackpink')">BLACKPINK</button>

            <div id="result" class="result" style="display: none;"></div>
        </div>

        <div class="section">
            <h2>🔧 API Features</h2>
            <ul>
                <li>✅ <strong>Real YouTube Data</strong> - Proxies actual Google YouTube autocomplete API</li>
                <li>✅ <strong>CORS Support</strong> - Cross-origin requests enabled</li>
                <li>✅ <strong>Multiple Languages</strong> - Korean, English, Japanese, Russian, etc.</li>
                <li>✅ <strong>Client Parameter Support</strong> - firefox, chrome, toolbar</li>
                <li>✅ <strong>Domain-specific</strong> - YouTube (ds=yt) or other domains</li>
                <li>✅ <strong>Development-only</strong> - Secure for production deployment</li>
            </ul>
        </div>

        <div class="section">
            <h2>📖 Usage Examples</h2>
            <h3>Basic Query:</h3>
            <div class="test-url">
                http://localhost:3001/api/autocomplete?q=그것이 당신의
            </div>

            <h3>With Client Parameter:</h3>
            <div class="test-url">
                http://localhost:3001/api/autocomplete?client=firefox&ds=yt&q=그것이 당신의
            </div>

            <h3>Response Format (Real YouTube Data):</h3>
            <div class="test-url">
                [
                "그것이 당신의", // Original query
                [ // Real YouTube suggestions
                "그것이 당신의 행복이라 할지라도",
                "그것이 당신의 행복이라 할지라도 노래방",
                "그것이 당신의 행복이라 할지라도 kk",
                "..."
                ],
                [], // Descriptions
                { // Google metadata
                "google:suggestsubtypes": [[512,433], [512], ...]
                }
                ]
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3001/api/autocomplete';

        function getQuery() {
            return document.getElementById('queryInput').value || 'test';
        }

        function showResult(data, format = 'JSON') {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';

            // Pretty print JSON
            try {
                const parsed = JSON.parse(data);
                resultDiv.textContent = `${format} Response (Real YouTube Data):\n\n${JSON.stringify(parsed, null, 2)}`;
            } catch (e) {
                resultDiv.textContent = `${format} Response:\n\n${data}`;
            }
        }

        function testQuery(query) {
            document.getElementById('queryInput').value = query;
            testAutocomplete();
        }

        async function testAutocomplete() {
            const query = encodeURIComponent(getQuery());
            const url = `${API_BASE}?client=firefox&ds=yt&q=${query}`;

            try {
                const response = await fetch(url);
                const data = await response.text();
                showResult(data, 'JSON');
            } catch (error) {
                showResult(`Error: ${error.message}`, 'ERROR');
            }
        }

        // Test with initial query on page load
        window.addEventListener('load', () => {
            setTimeout(testAutocomplete, 1000);
        });
    </script>
</body>

</html>
